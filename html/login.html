<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Web design</title>
    <link rel="stylesheet" href="../css/style_login.css">
</head>
<body>

    <nav>
        <ul class="menu">
            <li class="menu__content"><a href="index.html">HOME</a></li>
            <li class="menu__content"><a href="about.html">ABOUT</a></li>
            <li class="menu__content"><a href="products.html">PRODUCTS</a></li>
            <li class="menu__content"><a href="login.html">LOGIN</a></li>
        </ul>
    </nav> 
    
    <main>
        <div class="wrapper">
            <h1>Login</h1>
            <form action="" method="get" class="form">
                <div class="form__input">
                    <div class="form__input__mail">
                        <img id="email-pic" src="../images/email-icon.png" alt="Post icon for email">
                        <input type="email" id="email" placeholder="Email" required>
                    </div>
                    <div class="form__input__pw">
                        <img id="pw-pic" src="../images/pw-icon.png" alt="Lock icon for password">
                        <input type="password" id="pw" placeholder="Password" minlength="6" required>
                        <img id="eye-pic" class="opened-eye" src="../images/opened-eye.png" alt="Eye signalling whether the password is visible or not">
                    </div>
                </div>
                <button type="submit" class="form__input__btn">LOGIN</button>
                <div class="form__login-footer">
                    <a href="#">Forgot password?</a>
                </div>
            </form>
        </div>

        <div class="shape shape--1"></div>
        <div class="shape shape--2"></div>
        <div class="shape shape--3"></div>
        <div class="shape shape--4"></div>
        <div class="shape shape--5"></div>
    </main>

    <script>

        const inputEmail = document.getElementById("email");
        const inputPassword = document.getElementById("pw");
        const eyeIcon = document.getElementById("eye-pic");

        function validateInput(event) {
            let inputField = event.currentTarget;

            if (inputField.value.length > 64) {
                inputField.value = inputField.value.slice(0, 64);
            } else if (inputField.value.length > 55 && inputField.id !== "pw") {
                inputField.value = inputField.value.slice(0, 55); 
            }
        }

        function togglePasswordVisibility(event) {
            const eye = event.currentTarget;
            const eyeImgName = eye.src.split("/").pop();

            if (eyeImgName === "opened-eye.png") {
                eye.src = "../images/closed-eye.png";
                eye.classList.remove("opened-eye");
                eye.classList.add("closed-eye");
                inputPassword.type = "text";
            } else if (eyeImgName === "closed-eye.png") {
                eye.src = "../images/opened-eye.png";
                eye.classList.remove("closed-eye");
                eye.classList.add("opened-eye");
                inputPassword.type = "password";
            }
        }

        inputEmail.addEventListener("input", validateInput);
        inputPassword.addEventListener("input", validateInput);
        eyeIcon.addEventListener("click", togglePasswordVisibility);

    </script>

</body>
</html>